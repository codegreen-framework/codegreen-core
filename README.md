The core business logic of codegreen